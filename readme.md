# 网易云歌单 to Bilibili 收藏夹同步工具

这是一个自动化 Python 脚本，旨在解决一个特定需求：自动获取用户指定的网易云音乐歌单中的所有歌曲，然后在Bilibili上自动搜索这些歌曲，并将最相关的视频收藏到一个新建的收藏夹中。

经过多次迭代，该脚本具备了高度的自动化和良好的用户体验。


## ✨ 功能特性

- **自动化歌单解析**: 自动启动浏览器（使用 `undetected-chromedriver` 以避免被检测），用户只需在弹出的窗口中登录一次网易云音乐，脚本即可自动解析整个歌单的歌曲名和艺术家。
- **歌单缓存**: 首次成功解析歌单后，歌曲列表会保存到本地 `playlist.json` 文件中。下次运行时，脚本会询问是否使用缓存，避免了重复登录和解析的麻烦。
- **自动化B站收藏**:
    - 自动在B站搜索“歌曲名 + 艺术家”。
    - 智能筛选搜索结果，优先选择时长在1-10分钟之间的视频，以提高找到原曲MV或高质量音源的概率。
    - **自动创建新收藏夹**：每次运行都会以当前时间（例如 `08292015`）创建一个全新的收藏夹，避免了管理现有收藏夹的复杂性，每次同步都清晰明了。
- **配置缓存**: 用户的网易云歌单URL和B站登录Cookie都会被缓存到本地 `json` 文件中，脚本会询问是否更新，简化了后续操作。
- **防风控机制**: 在B站进行收藏操作时，每次操作后会暂停5秒；每收藏50个视频后，会暂停10分钟，以模拟正常用户行为，避免因API请求过于频繁而被B站风控。

## 🚀 如何开始

### 1. 准备环境

- **Python 3**: 确保你的电脑上安装了 Python 3.7 或更高版本。
- **Google Chrome**: 脚本需要调用本地的 Chrome 浏览器。

### 2. 下载文件

将以下两个文件下载到同一个文件夹中：
- `run.py`
- `requirements.txt`

### 3. 创建 `requirements.txt` 文件

在项目文件夹中创建一个名为 `requirements.txt` 的文本文件，并填入以下内容：

```
bilibili-api-python
undetected-chromedriver
selenium
```

### 4. 安装依赖

打开你的终端（Windows PowerShell, CMD 或 macOS Terminal），进入项目文件夹，然后运行以下命令来安装所有必需的Python库：

```bash
pip install -r requirements.txt
```

### 5. 运行脚本

在终端中，运行主程序：

```bash
python run.py
```

### 6. 按照提示操作

脚本启动后，会通过命令行与你交互，请按照以下步骤操作：

1.  **输入网易云歌单URL**: 首次运行时，会要求你输入目标歌单的URL（从浏览器地址栏复制）。之后会询问是否更改。
2.  **登录网易云音乐**: 脚本会打开一个 Chrome 浏览器窗口。请在该窗口中**手动登录**你的网易云账号（推荐使用手机号/密码登录，二维码登录有时会因反爬策略而失败）。登录成功后，回到终端，**按 `Enter` 键**继续。
3.  **（可选）使用本地歌单**: 如果之前成功解析过，脚本会询问你是否使用本地缓存的歌单。输入 `n` 将使用缓存，输入 `y` 将重新从网易云获取。
4.  **输入B站Cookie**: 首次运行时，脚本会要求你输入 `SESSDATA` 和 `bili_jct`。你需要：
    - 在**普通浏览器**中登录B站。
    - 按 `F12` 打开开发者工具，切换到 “Application” (应用) -> “Cookies” -> `https://www.bilibili.com`。
    - 在右侧列表中找到 `SESSDATA` 和 `bili_jct` 并复制它们的值。
    - 之后Cookie会被缓存，脚本会询问是否更新。
5.  **等待执行**: 完成以上步骤后，脚本将自动开始创建收藏夹、搜索和收藏视频的全过程。你只需要坐和放宽，欣赏自动化的魔力！

## 📁 项目文件结构

```
.
├── run.py                   # 主程序脚本
├── requirements.txt         # Python 依赖列表
├── playlist.json            # (自动生成) 缓存的网易云歌单
├── playlist_config.json     # (自动生成) 缓存的网易云URL配置
└── bili_cookie.json         # (自动生成) 缓存的B站Cookie
```

---
*这个项目凝聚了多次调试和优化的心血，希望能为你带来便利！*